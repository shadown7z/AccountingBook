/**
 * è´¦æˆ·æ•°æ®æ¨¡å‹
 */

// è´¦æˆ·ç±»å‹æšä¸¾
export enum AccountType {
  CASH = 'cash',           // ç°é‡‘
  ALIPAY = 'alipay',       // æ”¯ä»˜å®
  WECHAT = 'wechat',       // å¾®ä¿¡é’±åŒ…
  BANK_CARD = 'bank_card', // é“¶è¡Œå¡
  CREDIT_CARD = 'credit_card', // ä¿¡ç”¨å¡
  OTHER = 'other'          // å…¶ä»–
}

// è´¦æˆ·ä¿¡æ¯ç±»
export class Account {
  id: number = 0
  name: string = ''
  type: AccountType = AccountType.CASH
  balance: number = 0
  initialBalance: number = 0
  icon: string = ''
  color: string = ''
  isDefault: boolean = false
  createTime: Date = new Date()
  updateTime: Date = new Date()

  constructor(
    name: string = '',
    type: AccountType = AccountType.CASH,
    initialBalance: number = 0,
    icon: string = '',
    color: string = ''
  ) {
    this.name = name
    this.type = type
    this.balance = initialBalance
    this.initialBalance = initialBalance
    this.icon = icon
    this.color = color
    this.createTime = new Date()
    this.updateTime = new Date()
  }

  // æ›´æ–°ä½™é¢
  updateBalance(amount: number): void {
    this.balance += amount
    this.updateTime = new Date()
  }

  // è·å–è´¦æˆ·ç±»å‹æ˜¾ç¤ºåç§°
  getTypeDisplayName(): string {
    switch (this.type) {
      case AccountType.CASH:
        return 'ç°é‡‘'
      case AccountType.ALIPAY:
        return 'æ”¯ä»˜å®'
      case AccountType.WECHAT:
        return 'å¾®ä¿¡é’±åŒ…'
      case AccountType.BANK_CARD:
        return 'é“¶è¡Œå¡'
      case AccountType.CREDIT_CARD:
        return 'ä¿¡ç”¨å¡'
      case AccountType.OTHER:
        return 'å…¶ä»–'
      default:
        return 'æœªçŸ¥'
    }
  }

  // è·å–é»˜è®¤å›¾æ ‡
  getDefaultIcon(): string {
    switch (this.type) {
      case AccountType.CASH:
        return 'ğŸ’°'
      case AccountType.ALIPAY:
        return 'ğŸ”µ'
      case AccountType.WECHAT:
        return 'ğŸŸ¢'
      case AccountType.BANK_CARD:
        return 'ğŸ¦'
      case AccountType.CREDIT_CARD:
        return 'ğŸ’³'
      case AccountType.OTHER:
        return 'ğŸ“±'
      default:
        return 'ğŸ’°'
    }
  }

  // è·å–é»˜è®¤é¢œè‰²
  getDefaultColor(): string {
    switch (this.type) {
      case AccountType.CASH:
        return '#4CAF50'
      case AccountType.ALIPAY:
        return '#1677FF'
      case AccountType.WECHAT:
        return '#07C160'
      case AccountType.BANK_CARD:
        return '#FF9800'
      case AccountType.CREDIT_CARD:
        return '#9C27B0'
      case AccountType.OTHER:
        return '#607D8B'
      default:
        return '#4CAF50'
    }
  }
}

// è´¦æˆ·ç»Ÿè®¡ä¿¡æ¯
export class AccountStatistics {
  totalBalance: number = 0
  totalIncome: number = 0
  totalExpense: number = 0
  accountCount: number = 0

  constructor(
    totalBalance: number = 0,
    totalIncome: number = 0,
    totalExpense: number = 0,
    accountCount: number = 0
  ) {
    this.totalBalance = totalBalance
    this.totalIncome = totalIncome
    this.totalExpense = totalExpense
    this.accountCount = accountCount
  }
}